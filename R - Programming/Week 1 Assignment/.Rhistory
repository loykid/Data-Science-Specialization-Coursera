focus <- data[pollutant]
means <- c(means, interested_data[!is.na(interested_data)])
}
mean(means)
}
pollutantmean("specdata", "sulfate", 70:72)
means <- c(means, interested_data[!is.na(interested_data)])
pollutantmean <- function (directory, pollutant, id = 1:332) {
for (i in id) {
files <- paste(getwd(), "/", directory, "/", sprintf("%03d", i), ".csv", sep = "")
data <- read.csv(files)
focus <- data[pollutant]
means <- (interested_data[!is.na(interested_data)])
}
mean(means)
}
pollutantmean("specdata", "sulfate", 70:72)
pollutantmean <- function (directory, pollutant, id = 1:332) {
for (i in id) {
files <- paste(getwd(), "/", directory, "/", sprintf("%03d", i), ".csv", sep = "")
data <- read.csv(files)
focus <- data[pollutant]
means <- (focus[!is.na(focus)])
}
mean(means)
}
pollutantmean("specdata", "sulfate", 70:72)
pollutantmean("specdata", "nitrate", 23)
means <- (focus[!is.na(focus)])
means
pollutantmean <- function (directory, pollutant, id = 1:332) {
for (i in id) {
files <- paste(getwd(), "/", directory, "/", sprintf("%03d", i), ".csv", sep = "")
data <- read.csv(files)
focus <- data[pollutant]
focus <- (focus[!is.na(focus)])
}
mean(focus)
}
pollutantmean("specdata", "sulfate", 70:72)
pollutantmean("specdata", "nitrate", 23)
pollutantmean("specdata", "sulfate", 1:10)
pollutantmean <- function (directory, pollutant, id = 1:332) {
for (i in id) {
files <- paste(getwd(), "/", directory, "/", sprintf("%03d", i), ".csv", sep = "")
data <- read.csv(files)
focus <- data[pollutant]
focus <- (focus[!is.na(focus)])
}
mean(focus)
}
pollutantmean("specdata", "sulfate", 1:10)
pollutantmean("specdata", "sulfate", 70:72)
pollutantmean("specdata", "nitrate", 23)
pollutantmean <- function (directory, pollutant, id = 1:332) {
for (i in id) {
files <- paste(getwd(), "/", directory, "/", sprintf("%03d", i), ".csv", sep = "")
data <- read.csv(files)
focus <- data[pollutant]
focus <- c(focus, focus[!is.na(focus)])
}
mean(focus)
}
pollutantmean("specdata", "sulfate", 1:10)
pollutantmean("specdata", "sulfate", 70:72)
pollutantmean <- function (directory, pollutant, id = 1:332) {
final <- c()
for (i in id) {
files <- paste(getwd(), "/", directory, "/", sprintf("%03d", i), ".csv", sep = "")
data <- read.csv(files)
focus <- data[pollutant]
final <- c(final, focus[!is.na(focus)])
}
mean(final)
}
pollutantmean("specdata", "sulfate", 1:10)
pollutantmean("specdata", "sulfate", 70:72)
pollutantmean("specdata", "nitrate", 23)
pollutantmean("specdata", "nitrate", 70:72)
pollutantmean <- function (directory, pollutant, id = 1:332) {
focus <- c()
for (i in id) {
files <- paste(getwd(), "/", directory, "/", sprintf("%03d", i), ".csv", sep = "")
data <- read.csv(files)
final <- c(focus,data[pollutant])
}
mean(final, na.rm = TRUE)
}
# [1] 4.064128
pollutantmean("specdata", "nitrate", 70:72)
pollutantmean <- function (directory, pollutant, id = 1:332) {
final <- c()
for (i in id) {
files <- paste(getwd(), "/", directory, "/", sprintf("%03d", i), ".csv", sep = "")
data <- read.csv(files)
focus <- data[pollutant]
final <- c(final, focus[!is.na(focus)])
}
mean(final)
}
pollutantmean("specdata", "sulfate", 1:10)
complete <- function (directory, id = 1:332) {
results <- data.frame(id = numeric(), nobs = numeric())
for (i in id) {
files <- paste(getwd(), "/", directory, "/", sprintf("%03d", i), ".csv", sep = "")
data <- read.csv(files)
final <- data[is.na(data$sulfate),]
final <- final[is.na(data$nitrate),]
nobs <- nrow(final)
results <- rbind(results, data.frame(id = i, nobs = nobs))
}
return(results)
}
complete("specdata", c(2, 4, 8, 10, 12))
complete("specdata", 30:25)
complete <- function (directory, id = 1:332) {
results <- data.frame(id = numeric(0), nobs = numeric(0))
for (i in id) {
files <- paste(getwd(), "/", directory, "/", sprintf("%03d", i), ".csv", sep = "")
data <- read.csv(files)
final <- data[is.na(data$sulfate),]
final <- final[is.na(data$nitrate),]
nobs <- nrow(final)
results <- rbind(results, data.frame(id = i, nobs = nobs))
}
return(results)
}
complete("specdata", 30:25)
complete <- function (directory, id = 1:332) {
results <- data.frame(id = numeric(0), nobs = numeric(0))
for (i in id) {
files <- paste(getwd(), "/", directory, "/", sprintf("%03d", i), ".csv", sep = "")
data <- read.csv(files)
final <- data[!is.na(data$sulfate),]
final <- final[!is.na(data$nitrate),]
nobs <- nrow(final)
results <- rbind(results, data.frame(id = i, nobs = nobs))
}
return(results)
}
complete("specdata", 30:25)
complete <- function (directory, id = 1:332) {
results <- data.frame(id = numeric(), nobs = numeric())
for (i in id) {
files <- paste(getwd(), "/", directory, "/", sprintf("%03d", i), ".csv", sep = "")
data <- read.csv(files)
final <- data[!is.na(data$sulfate),]
final <- final[!is.na(data$nitrate),]
nobs <- nrow(final)
results <- rbind(results, data.frame(id = i, nobs = nobs))
}
return(results)
}
complete("specdata", 30:25)
# create an empty data frame to store values, just set as
complete <- function (directory, id = 1:332) {
results <- data.frame(id = 0, nobs = 0)
for (i in id) {
files <- paste(getwd(), "/", directory, "/", sprintf("%03d", i), ".csv", sep = "")
data <- read.csv(files)
final <- data[!is.na(data$sulfate),]
final <- final[!is.na(data$nitrate),]
nobs <- nrow(final)
results <- rbind(results, data.frame(id = i, nobs = nobs))
}
return(results)
}
complete("specdata", 30:25)
# create an empty data frame to store values, and have headers
# loop through the files and get only the necessary ones
# get those that are not NA for sulfate and nitrate
# count using nrow()
# rbind back into our empty dataframe
complete <- function (directory, id = 1:332) {
results <- data.frame(id = numeric(), nobs = numeric())
for (i in id) {
files <- paste(getwd(), "/", directory, "/", sprintf("%03d", i), ".csv", sep = "")
data <- read.csv(files)
final <- data[!is.na(data$sulfate),]
final <- final[!is.na(data$nitrate),]
nobs <- nrow(final)
results <- rbind(results, data.frame(id = i, nobs = nobs))
}
return(results)
}
complete("specdata", 30:25)
#   id nobs
# 1 30  980
# 2 29  749
# 3 28  475
# 4 27  376
# 5 26  613
# 6 25  463
complete("specdata", 3)
# create an empty data frame to store values, and have headers
# loop through the files and get only the necessary ones
# get those that are not NA for sulfate and nitrate
# count using nrow()
# rbind back into our empty dataframe
complete <- function (directory, id = 1:332) {
results <- data.frame(id = numeric(), nobs = numeric())
for (i in id) {
files <- paste(getwd(), "/", directory, "/", sprintf("%03d", i), ".csv", sep = "")
data <- read.csv(files)
final <- data[(!is.na(data$sulfate)),]
final <- final[(!is.na(data$nitrate)),]
nobs <- nrow(final)
results <- rbind(results, data.frame(id = i, nobs = nobs))
}
return(results)
}
complete("specdata", 30:25)
#   id nobs
# 1 30  980
# 2 29  749
# 3 28  475
# 4 27  376
# 5 26  613
# 6 25  463
complete("specdata", 3)
# create an empty data frame to store values, and have headers
# loop through the files and get only the necessary ones
# get those that are not NA for sulfate and nitrate
# count using nrow()
# rbind back into our empty dataframe
complete <- function (directory, id = 1:332) {
results <- data.frame(id = numeric(), nobs = numeric())
for (i in id) {
files <- paste(getwd(), "/", directory, "/", sprintf("%03d", i), ".csv", sep = "")
data <- read.csv(files)
final <- data[(!is.na(data$sulfate)),]
final <- final[(!is.na(data$nitrate)),]
nobs <- nrow(final)
results <- rbind(results, data.frame(id = i, nobs = nobs))
}
results
}
#   id nobs
# 1 30  980
# 2 29  749
# 3 28  475
# 4 27  376
# 5 26  613
# 6 25  463
complete("specdata", 3)
# create an empty data frame to store values, and have headers
# loop through the files and get only the necessary ones
# get those that are not NA for sulfate and nitrate
# count using nrow()
# rbind back into our empty dataframe
complete <- function (directory, id = 1:332) {
results <- data.frame(id = numeric(), nobs = numeric())
for (i in id) {
files <- paste(getwd(), "/", directory, "/", sprintf("%03d", i), ".csv", sep = "")
data <- read.csv(files)
final <- data[(!is.na(data$sulfate)),]
final <- final[(!is.na(data$nitrate)),]
nobs <- nrow(final)
results <- rbind(results, data.frame(id = i, nobs = nobs))
}
results
}
corr <- function(directory, threshold = 0) {
data <-
list.files(pattern = "*.csv") %>%
map_df(~fread(.))
dt <- dt[complete.cases(dt),]
dt <- dt[, .(nobs = .N, corr = cor(x = sulfate, y = nitrate)), by = ID][nobs > threshold]
return(dt[, corr])
}
cr <- corr("specdata", 400)
corr <- function(directory, threshold = 0) {
data <-
list.files(pattern = "*.csv") %>%
map_df(~fread(.))
data <- data[complete.cases(data),]
data <- data[, .(nobs = .N, corr = cor(x = sulfate, y = nitrate)), by = ID][nobs > threshold]
return(data[, corr])
}
cr <- corr("specdata", 400)
corr <- function(directory, threshold = 0){
data <- list.files(directory, pattern = "*.csv")
corr = c()
for (i in 1:332){
files <- read.csv(data[i])
if (sum(complete.cases(files)) > threshold
corr = c(corr, cor(csvdata$sulfate,csvdata$nitrate, use = “pairwise.complete.obs”))
}
}
corr = function(directory, threshold = 0){
files_list = list.files(directory, full.names = TRUE)
correlation = c()
for (i in 1:332){
csvdata = read.csv(files_list[i])
if (sum(complete.cases(csvdata))>threshold
correlation = c(correlation, cor(csvdata$sulfate,csvdata$nitrate, use = “pairwise.complete.obs”))
}
}
correlation
}
corr <- function(directory, threshold = 0){
data <- list.files(directory, pattern = "*.csv")
corr = c()
for (i in 1:332){
files <- read.csv(data[i])
if (sum(complete.cases(files)) > threshold)
corr = c(corr, cor(csvdata$sulfate,csvdata$nitrate,
use = pairwise.complete.obs))
}
}
cr <- corr("specdata", 400)
setwd("C:/Users/User/Desktop/specdata")
# Decided to read files based on id first, then filter based on "pollutant",
# then removed NA values and store in a vector to retain the pertinent values then
# calculate mean
setwd("C:/Users/User/Desktop")
corr <- function(directory, threshold = 0){
data <- list.files(directory, pattern = "*.csv")
corr = c()
for (i in 1:332){
files <- read.csv(data[i])
if (sum(complete.cases(files)) > threshold)
corr = c(corr, cor(csvdata$sulfate,csvdata$nitrate,
use = pairwise.complete.obs))
}
}
cr <- corr("specdata", 400)
corr <- function(directory, threshold = 0){
data <- list.files(directory, full.names = TRUE)
corr = c()
for (i in 1:332){
files <- read.csv(data[i])
if (sum(complete.cases(files)) > threshold)
corr = c(corr, cor(csvdata$sulfate,csvdata$nitrate,
use = pairwise.complete.obs))
}
}
cr <- corr("specdata", 400)
corr <- function(directory, threshold = 0){
data <- list.files(directory, full.names = TRUE)
corr = c()
for (i in 1:332){
files <- read.csv(data[i])
if (sum(complete.cases(files)) > threshold)
corr = c(corr, cor(csvdata$sulfate,csvdata$nitrate,
use = "pairwise.complete.obs"))
}
}
cr <- corr("specdata", 400)
corr <- function(directory, threshold = 0){
data <- list.files(directory, full.names = TRUE)
corr = c()
for (i in 1:332){
files <- read.csv(data[i])
if (sum(complete.cases(files)) > threshold)
corr = c(corr, cor(files$sulfate, files$nitrate,
use = "pairwise.complete.obs"))
}
}
cr <- corr("specdata", 400)
corr <- function(directory, threshold = 0){
data <- list.files(directory, full.names = TRUE)
correlate = c()
for (i in 1:332){
files <- read.csv(data[i])
if (sum(complete.cases(files)) > threshold)
correlate <- c(correlate, cor(files$sulfate, files$nitrate,
use = "pairwise.complete.obs"))
}
correlate
}
cr <- corr("specdata", 400)
corr <- function(directory, threshold = 0){
data <- list.files(directory, full.names = TRUE)
correlate = c()
for (i in 1:332){
files <- read.csv(data[i])
final <- data[(!is.na(data$sulfate)),]
final <- final[(!is.na(data$nitrate)),]
nobs <- nrow(final)
nobs > threshold
correlate <- c(correlate, cor(final$nitrate, final$sulfate))
}
correlate
}
cr <- corr("specdata", 400)
corr <- function(directory, threshold = 0){
data <- list.files(directory, full.names = TRUE)
correlate = c()
for (i in 1:332){
files <- read.csv(data[i])
final <- data[(!is.na(data$sulfate)),]
final <- final[(!is.na(data$nitrate)),]
nobs <- nrow(final)
nobs > threshold
correlate <- c(correlate, cor(nitrate, sulfate))
}
correlate
}
cr <- corr("specdata", 400)
corr <- function(directory, threshold = 0){
data <- list.files(directory, full.names = TRUE)
correlate = c()
for (i in 1:332){
files <- read.csv(data[i])
final <- data[(!is.na(data$sulfate)),]
final <- final[(!is.na(data$nitrate)),]
nobs <- nrow(final)
nobs > threshold
correlate <- c(correlate, cor(final[nitrate], final[sulfate]))
}
correlate
}
cr <- corr("specdata", 400)
corr <- function(directory, threshold = 0){
data <- list.files(directory, full.names = TRUE)
correlate = c()
for (i in 1:332){
files <- read.csv(data[i])
final <- data[(!is.na(data[sulfate])),]
final <- final[(!is.na(data[nitrate])),]
nobs <- nrow(final)
nobs > threshold
correlate <- c(correlate, cor(final[nitrate], final[sulfate]))
}
correlate
}
cr <- corr("specdata", 400)
corr <- function(directory, threshold = 0){
data <- list.files(directory, full.names = TRUE)
correlate = c()
for (i in 1:332){
files <- read.csv(data[i])
final <- data[(!is.na(data["sulfate"])),]
final <- final[(!is.na(data["nitrate"])),]
nobs <- nrow(final)
nobs > threshold
correlate <- c(correlate, cor(final["nitrate"], final["sulfate"]))
}
correlate
}
cr <- corr("specdata", 400)
corr <- function(directory, threshold = 0){
data <- list.files(directory, full.names = TRUE)
correlate = c()
for (i in 1:332){
files <- read.csv(data[i], header = TRUE)
files <- files[complete.cases(files),]
comp <- nrow(files)
if (comp > threshold){
correlate <- c(correlate, cor(files$nitrate, files$sulfate))
}
}
correlate
}
cr <- corr("specdata", 400)
corr <- function(directory, threshold = 0){
data <- list.files(directory, full.names = TRUE)
correlate = c()
for (i in 1:332){
files <- read.csv(data[i], header = TRUE)
files <- files[complete.cases(files),]
comp <- nrow(files)
if (comp > threshold){
correlate <- c(correlate, cor(files$nitrate, files$sulfate))
}
}
return(correlate)
}
set.seed(42)
cc <- complete("specdata", 332:1)
use <- sample(332, 10)
print(cc[use, "nobs"])
cr <- corr("specdata")
summary(cr)
cr <- corr("specdata", 400)
head(cr)
# [1] -0.01895754 -0.04389737 -0.06815956 -0.07588814  0.76312884 -0.15782860
summary(cr)
pollutantmean("specdata", "sulfate", 1:10)
pollutantmean("specdata", "nitrate", 70:72)
pollutantmean("specdata", "sulfate", 34)
pollutantmean("specdata", "nitrate")
print(cc$nobs)
cc <- complete("specdata", c(6, 10, 20, 34, 100, 200, 310))
print(cc$nobs)
cc <- complete("specdata", 54)
print(cc$nobs)
RNGversion("3.5.1")
set.seed(42)
cc <- complete("specdata", 332:1)
use <- sample(332, 10)
print(cc[use, "nobs"])
cr <- corr("specdata")
cr <- sort(cr)
RNGversion("3.5.1")
set.seed(868)
out <- round(cr[sample(length(cr), 5)], 4)
print(out)
cr <- corr("specdata", 129)
cr <- sort(cr)
n <- length(cr)
RNGversion("3.5.1")
set.seed(197)
out <- c(n, round(cr[sample(n, 5)], 4))
print(out)
print(c(n, round(cr, 4)))
cr <- corr("specdata", 2000)
n <- length(cr)
cr <- corr("specdata", 1000)
cr <- sort(cr)
print(c(n, round(cr, 4)))
